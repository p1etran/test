<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" 
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Walentynki dla Zuzi 🌻</title>
  <style>
    :root {
      --night: #1a3657;
      --sunrise: linear-gradient(to bottom, #ff9966, #ff5e62);
      --day: #fff3e0;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent; /* remove tap highlight on mobile */
    }

    body {
      margin: 0;
      height: 100vh;
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--night);
      transition: background 20s linear;
    }

    /* Centered container for the intro and sunrise */
    .container {
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      position: relative;
      text-align: center;
    }

    /* The "sun" that moves up the screen */
    #sun {
      width: 80px;
      height: 80px;
      background: #ffdd00;
      border-radius: 50%;
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      box-shadow: 0 0 40px #ffdd0080;
      transition: transform 20s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1;
    }

    /* Intro message that fades in */
    .message {
      color: white;
      margin-top: 20px;
      opacity: 0;
      transition: opacity 3s;
      z-index: 2;
    }

    /* Scrolling romantic text lines */
    .romantic-text {
      color: white;
      font-size: 1.4rem;
      line-height: 1.6;
      margin-top: 30px;
      opacity: 0;
      transition: opacity 2s ease-in-out;
      z-index: 2;
    }

    /* Animated particles floating upwards */
    .particle {
      position: fixed;
      font-size: 2rem;
      animation: float 3s linear forwards;
      pointer-events: none;
      z-index: 2;
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(-100vh) rotate(360deg);
        opacity: 0;
      }
    }

    /* The start button on the night screen */
    .start-button {
      padding: 1.2rem 2.5rem;
      font-size: 1.4rem;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      background: #ff6b6b;
      color: white;
      box-shadow: 0 5px 15px rgba(255,107,107,0.3);
      opacity: 0;
      transform: translateY(20px);
      transition: all 2s ease;
      z-index: 9999;
    }

    /* Final screen after pressing "Tak" */
    .final-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: var(--day);
      padding: 20px;
      text-align: center;
      overflow: auto;
    }

    /* Rotating sunflower on final screen */
    .sunflower {
      font-size: 4rem;
      margin: 20px;
      animation: rotate 5s infinite linear;
    }
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }

    /* The two buttons (Tak / Nie) on the question screen */
    .question-buttons {
      margin-top: 2rem;
      position: relative;
      height: 200px; 
    }

    .btn-decision {
      background: #ff6b6b;
      color: white;
      padding: 1.5rem 3rem;
      font-size: 1.4rem;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(255,107,107,0.3);
    }

    /* We'll position the 'Nie' button absolutely and move it around. */
    .btn-escape {
      position: absolute;
      background: #ff4444;
      border: 2px solid white;
      border-radius: 20px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
      color: white;
      padding: 1.2rem 2.5rem;
      font-size: 1.2rem;
      cursor: pointer;
    }

  </style>
</head>
<body>

  <!-- NIGHT / INTRO SCREEN -->
  <div class="container">
    <button class="start-button" id="startButton">Rozpocznij Naszą Historię 🌻</button>
    <div class="message" id="message">
      <h2>Każdy dzień z Tobą to nowy powód do szczęścia... 🌻</h2>
      <p>Patrz, jak nasza miłość rozkwita razem ze wschodem słońca</p>
    </div>
    <div class="romantic-text" id="romanticText"></div>
  </div>

  <script>
    /* ===================
       CONFIG & VARIABLES
       =================== */
    let animationRunning = false;
    let particlesInterval;
    let lineIndex = 0;
    const romanticLines = [
      "Dzień dobry, moje słońce 🌻",
      "Zastanawiałem się, jak zacząć ten dzień...",
      "I zrozumiałem, że najlepszym początkiem jesteś Ty",
      "Twój uśmiech rozświetla mój świat bardziej niż słońce",
      "Dziś, gdy świat budzi się do życia...",
      "Chcę Ci powiedzieć coś ważnego",
      "Jesteś najpiękniejszym słonecznikiem w moim życiu",
      "Który zawsze zwraca się w stronę światła",
      "I sprawia, że każdy dzień jest wyjątkowy",
      "Gotowy na moje pytanie? 😊"
    ];

    /* =================
       PARTICLE EFFECTS
       ================= */
    function createParticles() {
      particlesInterval = setInterval(() => {
        const types = ['🌻','💖','✨','🌸'];
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + 'vw';
        particle.textContent = types[Math.floor(Math.random() * types.length)];
        document.body.appendChild(particle);
        // Remove after 3s
        setTimeout(() => particle.remove(), 3000);
      }, 250);
    }

    /* ==========================
       ROMANTIC LINES SEQUENCER
       ========================== */
    function showRomanticText() {
      const textElement = document.getElementById('romanticText');
      function showNextLine() {
        if (lineIndex < romanticLines.length) {
          textElement.textContent = romanticLines[lineIndex];
          textElement.style.opacity = 1;
          lineIndex++;

          setTimeout(() => {
            textElement.style.opacity = 0;
          }, 3000);

          setTimeout(showNextLine, 4000);
        }
      }
      showNextLine();
    }

    /* ===========================
       SUNRISE ANIMATION + INTRO
       =========================== */
    function startSunrise() {
      if (animationRunning) return;
      animationRunning = true;

      // Create the sun element
      const sun = document.createElement('div');
      sun.id = 'sun';
      document.body.appendChild(sun);

      // After a small delay, start transitions
      setTimeout(() => {
        document.body.style.background = "var(--sunrise)";
        sun.style.transform = "translateY(-120vh)";
        document.getElementById('message').style.opacity = '1';
        showRomanticText();
      }, 50);

      createParticles();

      // Remove "Start" button
      document.getElementById('startButton').remove();

      // After ~18s (the duration of the sunrise), show final question screen
      setTimeout(() => {
        showValentineQuestion();
      }, 18000);
    }

    /* ===========================
       VALENTINE QUESTION SCREEN
       =========================== */
    function showValentineQuestion() {
      // Clear all existing HTML in body 
      // to create a new "question" screen
      document.body.innerHTML = `
        <div class="container" style="background: var(--day); overflow:hidden;">
          <div class="sunflower">🌻</div>
          <h1 style="color:#ff6b6b; font-size:2rem; padding:0 20px;">
            Zuziu, czy zostaniesz moją Walentynką? 🌻
          </h1>
          <div class="question-buttons" id="questionButtons">
            <button id="przyciskTak" class="btn-decision"
                    style="position:absolute; left:50%; transform:translateX(-50%);">
              Tak! 🌻
            </button>
            <button id="przyciskNie" class="btn-escape"
                    style="left:30%; top:70%;">
              Nie
            </button>
          </div>
        </div>
      `;

      // Stop particle spawner
      clearInterval(particlesInterval);

      // Hook up the "Tak" button
      const btnTak = document.getElementById('przyciskTak');
      btnTak.addEventListener('click', showFinalScreen);

      // Hook up the "Nie" button with simpler toggle logic
      const btnNie = document.getElementById('przyciskNie');
      btnNie.style.position = 'absolute';
      let nieState = 0;  // track how many times she taps "Nie"

      // On pointer down, toggle text & move
      btnNie.addEventListener('pointerdown', () => {
        if (nieState === 0) {
          btnNie.textContent = 'Na pewno?';
          randomMove(btnNie);
          nieState = 1;
        } else if (nieState === 1) {
          btnNie.textContent = 'No dobra...';
          randomMove(btnNie);
          nieState = 2;
        } else {
          btnNie.textContent = 'Naprawdę? 😢';
          randomMove(btnNie);
          nieState = 3;
        }
      });
    }

    /* ===========================
       RANDOM MOVE (SAFE CLAMPING)
       =========================== */
    function randomMove(btn) {
      const padding = 80; // keep the button within the screen edges
      const maxX = window.innerWidth - padding;
      const maxY = window.innerHeight - padding;

      const newX = Math.random() * maxX;
      const newY = Math.random() * maxY;

      btn.style.left = `${newX}px`;
      btn.style.top = `${newY}px`;
    }

    /* ===========================
       FINAL SCREEN AFTER "TAK"
       =========================== */
    function showFinalScreen() {
      document.body.innerHTML = `
        <div class="final-screen">
          <div class="sunflower">🌻</div>
          <h1 style="color:#ff6b6b; font-size:2rem;">
            Jesteś najlepszą Walentynką! 💘<br>
            Kocham Cię! 🌻
          </h1>
          <div style="margin-top:2rem; font-size:1.5rem">
            🌻💖🌻😘🌻❤️🌻
          </div>
        </div>
      `;
    }

    /* ===============================
       SETUP: SHOW "START" BUTTON, ETC
       =============================== */
    window.addEventListener('load', () => {
      const startButton = document.getElementById('startButton');
      startButton.style.opacity = '1';
      startButton.style.transform = 'translateY(0)';
      startButton.addEventListener('click', startSunrise);
    });
  </script>
</body>
</html>
